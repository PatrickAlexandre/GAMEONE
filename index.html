<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMORPG Calculator Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body class="bg-gray-800 text-white font-sans leading-normal tracking-normal">
    <div class="container mx-auto p-4">
        <!-- Profile Section -->
        <div class="bg-gray-900 p-4 rounded-lg flex items-center">
            <img src="https://placehold.co/50x50" alt="Alliance logo" class="w-12 h-12 mr-4">
            <div>
                <div class="flex items-center mb-2">
                    <span class="font-bold text-pink-500 text-lg mr-2">Johanna</span>
                    <span class="text-sm">Champion sanglant</span>
                </div>
                <div class="flex items-center">
                    <span class="text-yellow-400"><i class="fas fa-shield-alt"></i> 14565</span>
                    <span id="character-age" class="ml-4">110 Humaine</span>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="mt-4 bg-gray-900 p-2 rounded-lg flex justify-around">
            <button id="character-btn" class="bg-yellow-500 py-1 px-4 rounded text-black font-bold">PERSONNAGE</button>
            <button class="text-yellow-500">HAUTS FAITS</button>
            <button class="text-yellow-500">COLLECTIONS</button>
        </div>

        <!-- Game Stats Section -->
        <div class="mt-4 bg-gray-900 p-4 rounded-lg">
            <div class="flex justify-between items-center mb-2">
                <div class="flex items-center">
                    <div class="bg-gray-700 p-2 rounded mr-2">
                        <span class="text-orange-400">75</span>
                    </div>
                    <div class="bg-gray-700 p-2 rounded mr-2">
                        <span class="text-purple-400">0</span>
                    </div>
                    <div class="bg-gray-700 p-2 rounded mr-2">
                        <span class="text-yellow-500">39</span>
                    </div>
                    <div class="bg-gray-700 p-2 rounded mr-2">
                        <span class="text-purple-400">32</span>
                    </div>
                    <div class="bg-gray-700 p-2 rounded mr-2">
                        <span class="text-white">0.71</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <img src="https://placehold.co/30x30" alt="Character icon" class="rounded-full mr-2">
                    <span class="text-yellow-400">11</span>
                </div>
                <div class="flex items-center">
                    <span class="text-green-400">797 / 797</span>
                </div>
                <div class="flex items-center">
                    <span class="text-blue-400">487 / 489</span>
                </div>
            </div>
        </div>

        <!-- Energy and Life Expectancy Calculator Modal -->
        <div id="energyModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden">
            <div class="bg-gray-900 p-8 rounded-lg w-full max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-bold">Energy and Life üßÆ</h2>
                    <button id="closeModalBtn" class="text-gray-400 hover:text-gray-200">&times;</button>
                </div>
                <form id="energyForm">
                    <div class="flex flex-wrap -mx-2 mb-4">
                        <div class="w-full md:w-1/2 px-2 mb-4 md:mb-0">
                            <label for="gender" class="block text-gray-400">Gender</label>
                            <select class="form-control block w-full bg-gray-800 text-white border border-gray-700 rounded px-3 py-2" id="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="w-full md:w-1/2 px-2">
                            <label for="age" class="block text-gray-400">Age</label>
                            <input type="number" class="form-control block w-full bg-gray-800 text-white border border-gray-700 rounded px-3 py-2" id="age" placeholder="Enter your age">
                        </div>
                    </div>
                    <div class="flex flex-wrap -mx-2 mb-4">
                        <div class="w-full md:w-1/3 px-2 mb-4 md:mb-0">
                            <label for="weight" class="block text-gray-400">Weight (kg)</label>
                            <input type="number" class="form-control block w-full bg-gray-800 text-white border border-gray-700 rounded px-3 py-2" id="weight" placeholder="Enter your weight" value="62" min="2.1" max="635">
                        </div>
                        <div class="w-full md:w-1/3 px-2 mb-4 md:mb-0">
                            <label for="height" class="block text-gray-400">Height (cm)</label>
                            <input type="number" class="form-control block w-full bg-gray-800 text-white border border-gray-700 rounded px-3 py-2" id="height" placeholder="Enter your height" value="165" min="54.6" max="272">
                        </div>
                        <div class="w-full md:w-1/3 px-2">
                            <label for="activity" class="block text-gray-400">Activity Level</label>
                            <input type="number" step="0.1" class="form-control block w-full bg-gray-800 text-white border border-gray-700 rounded px-3 py-2" id="activity" placeholder="Enter activity level" value="1.5" min="1.2" max="2.5">
                        </div>
                    </div>
                </form>
                <div class="mt-4">
                    <h3 class="text-lg">Results</h3>
                    <p id="bmr" class="text-gray-400">BMR </p>
                    <p id="dej" class="text-gray-400">DEJ </p>
                    <p id="nap" class="text-gray-400">NAP </p>
                    <p id="ageDisplay" class="text-gray-400 mt-2"></p>
                </div>
            </div>
        </div>

        <!-- Additional Info -->
        <div class="mt-4 bg-gray-900 p-4 rounded-lg">
            <p>Age: <span id="displayed-age"></span></p>
            <p>Points Hauts Faits: <span id="points-hauts-faits"></span></p>
            <div class="progress mt-4 bg-gray-700 rounded h-6 overflow-hidden">
                <div id="lifePercentage" class="bg-green-500 h-6 rounded" role="progressbar" style="width: 0%;"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const characterBtn = document.getElementById('character-btn');
            const energyModal = document.getElementById('energyModal');
            const closeModalBtn = document.getElementById('closeModalBtn');

            characterBtn.addEventListener('click', () => {
                energyModal.classList.remove('hidden');
            });

            closeModalBtn.addEventListener('click', () => {
                energyModal.classList.add('hidden');
            });

            // Show modal on page load
            energyModal.classList.remove('hidden');

            const inputs = document.querySelectorAll('#gender, #age, #weight, #height, #activity');
            inputs.forEach(input => {
                input.addEventListener('input', calculateEnergy);
            });

            function calculateBMR(gender, weight, height, age) {
                if (gender === 'male') {
                    return (10 * weight) + (6.25 * height) - (5 * age) + 5;
                } else {
                    return (10 * weight) + (6.25 * height) - (5 * age) - 161;
                }
            }

            function calculateDEJ(bmr, activityLevel) {
                return bmr * activityLevel;
            }

            function calculateLifeExpectancyPercentage(gender, age) {
                const lifeExpectancy = gender === 'male' ? 80.0 : 85.7;
                const remainingLifeYears = Math.max(lifeExpectancy - age, 0);
                return {percentage: (remainingLifeYears / lifeExpectancy) * 100, lifeExpectancy};
            }

            function calculateEnergy() {
                const gender = document.getElementById('gender').value;
                const weight = parseFloat(document.getElementById('weight').value);
                const height = parseFloat(document.getElementById('height').value);
                const age = parseInt(document.getElementById('age').value, 10);
                const activityLevel = parseFloat(document.getElementById('activity').value);

                if (weight > 0 && height > 0 && age > 0 && activityLevel > 0) {
                    const bmr = calculateBMR(gender, weight, height, age);
                    const dej = calculateDEJ(bmr, activityLevel);
                    document.getElementById('bmr').innerHTML = `M√©tabolisme de Base au Repos (MBR) ${bmr.toFixed(0)} kcal/jour`;
                    document.getElementById('dej').innerHTML = `D√©pense √ânerg√©tique Journali√®re (DEJ) ${dej.toFixed(0)} kcal/jour`;
                    document.getElementById('nap').innerHTML = `Niveau d'Activit√© Physique (NAP) ${activityLevel.toFixed(2)}`;
                    updateLifeExpectancy(gender, age);
                } else {
                    document.getElementById('bmr').innerHTML = "Please fill all fields with valid values to calculate BMR and DEJ.";
                }
            }

            function updateLifeExpectancy(gender, age) {
                if (age > 0) {
                    const lifeData = calculateLifeExpectancyPercentage(gender, age);
                    const lifePercentageFormatted = `(${lifeData.percentage.toFixed(0)}%) ${age} / ${lifeData.lifeExpectancy} years`;
                    document.getElementById('ageDisplay').innerHTML = `Age: ${age}`;
                    document.getElementById('lifePercentage').innerHTML = lifePercentageFormatted;
                    document.getElementById('lifePercentage').style.width = `${lifeData.percentage.toFixed(2)}%`;

                    // Update additional info section
                    document.getElementById('displayed-age').innerHTML = age;
                    updateAgeProgressBar(age, gender);
                }
            }

            function updateAgeProgressBar(age, gender) {
                const lifeExpectancy = (gender === 'male') ? 80.0 : 85.7;
                const agePercentage = ((age / lifeExpectancy) * 100).toFixed(2);
                const ageProgressBarContainer = document.getElementById('ageProgressBarContainer');
                ageProgressBarContainer.innerHTML = `
                    <div class="rounded bg-green-500 relative overflow-hidden">
                        <div class="bg-green-700 text-black text-lg px-2 rounded" style="width: ${agePercentage}%; max-width: 100%; white-space: nowrap;">
                            (${agePercentage}%) ${age} / ${lifeExpectancy}
                        </div>
                    </div>
                `;
            }
        });
    </script>
</body>

</html>
